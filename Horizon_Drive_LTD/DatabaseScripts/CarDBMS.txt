-- User related table

CREATE TABLE [User] (
    UserId VARCHAR(10) PRIMARY KEY,
    UserName VARCHAR(255) NOT NULL,
    FirstName VARCHAR(255) NOT NULL,
    LastName VARCHAR(255) NOT NULL,
    DOB DATE NOT NULL,
    Email VARCHAR(255) NOT NULL,
    TelephoneNo INT NOT NULL,
    Password VARCHAR(255) NOT NULL,
    ProfilePicture VARCHAR(255),
    Address VARCHAR(255)
);

-- Admin
CREATE TABLE Admin (
    AdminID VARCHAR(10) PRIMARY KEY,
    UserID VARCHAR(10) FOREIGN KEY REFERENCES [User](UserId),
    Role VARCHAR(50),
    Password VARCHAR(255) --PASSWORD<20
);

-- Customer
CREATE TABLE Customer (
    CustomerID VARCHAR(10) PRIMARY KEY,
    UserID VARCHAR(10) FOREIGN KEY REFERENCES [User](UserId),
    LicenseNo VARCHAR(30),
    LicenseExpiryDate DATE,
    LicensePhoto TEXT
);--

-- Lessor 
CREATE TABLE Lessor (
    LessorID VARCHAR(10) PRIMARY KEY,
    UserId VARCHAR(10) FOREIGN KEY REFERENCES [User](UserId),
    No_Of_Cars INT
);

--- Car related table
CREATE TABLE Car (
    CarID VARCHAR(10) PRIMARY KEY,
    UserID VARCHAR(10) FOREIGN KEY REFERENCES [User](UserId),
    CarBrand VARCHAR(255),
    Category VARCHAR(255), -- Use a CHECK constraint for ENUM-like behavior
	CarImagePath Text, 
    RegistrationNo VARCHAR(100),
    Model VARCHAR(50),
    Years INT,
    Colour VARCHAR(50),
    Features TEXT,
    VehicleDescription TEXT,
    CarPrice DECIMAL(10, 2),
    SeatNo INT,
    EngineCapacity VARCHAR(60),
    Ratings DECIMAL(2,1),
    Power VARCHAR(10),
    DriveTrain VARCHAR(30),
    FuelType VARCHAR(30),
    TransmissionType VARCHAR(30),
    Status VARCHAR(40),
	AvailabilityStart Datetime,
	AvailabilityEnd Datetime
);

--- Booking 

CREATE TABLE Booking (
    BookingID VARCHAR(10) PRIMARY KEY,
    CustomerID VARCHAR(10) FOREIGN KEY REFERENCES Customer(CustomerID),
    CarID VARCHAR(10) FOREIGN KEY REFERENCES Car(CarID),
    BookingDate DATE,
    PickupDate DATE,
    DropoffDate DATE,
    PickupLocation VARCHAR(255),
    DropoffLocation VARCHAR(255),
    IncludeDriver BIT,
    BabyCarSeat BIT,
    FullInsuranceCoverage BIT,
    RoofRack BIT,
    AirportPickupDropoff BIT,
	BookingStatus VARCHAR(40)
);

-- Payment
CREATE TABLE Payment (
    PaymentID VARCHAR(10) PRIMARY KEY,
    BookingID VARCHAR(10) FOREIGN KEY REFERENCES Booking(BookingID),
    UserID VARCHAR(10) FOREIGN KEY REFERENCES [User](UserId),
    PaymentDate DATE,
    PaymentMethod VARCHAR(20),
    PaymentAmount DECIMAL(15,2)
);



---  Maintenance

CREATE TABLE Maintenance (
    MaintenanceID VARCHAR(10) PRIMARY KEY,
    CarID VARCHAR(10) FOREIGN KEY REFERENCES Car(CarID),
    MaintenanceDate DATE,
    MaintenanceStatus VARCHAR(60),
    MaintenanceDescription VARCHAR(500)
);